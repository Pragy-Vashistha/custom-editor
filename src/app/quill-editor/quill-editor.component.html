<mat-card class="quill-editor-card">
  <mat-card-header>
    <mat-card-title>Quill Expression Editor</mat-card-title>
    <mat-card-subtitle>Select properties and build your expression with Quill</mat-card-subtitle>
  </mat-card-header>
  
  <mat-card-content>
    <form #myForm="ngForm" class="quill-editor-form" (ngSubmit)="onSubmit(myForm)">
      <!-- Property Selection with Insert Button -->
      <div class="property-selection-row">
        <mat-form-field appearance="outline" class="property-select">
          <mat-label>Select a Property</mat-label>
          <mat-select #propSelector name="propSelector" [(ngModel)]="selectedProperty"
                      panelClass="property-select-panel"
                      disableOptionCentering>
            <mat-option *ngFor="let prop of properties" [value]="prop">
              {{ prop }}
            </mat-option>
          </mat-select>
          <mat-hint>Choose a property to insert into your expression</mat-hint>
        </mat-form-field>
        
        <button mat-raised-button 
                color="primary" 
                type="button" 
                class="insert-button"
                [disabled]="!selectedProperty"
                (click)="insertProperty(selectedProperty); selectedProperty = ''">
          Insert Property
        </button>
      </div>

      <!-- Quill Editor -->
      <div class="quill-container">
        <label class="mat-label">Expression</label>
        <quill-editor
          [(ngModel)]="editorContent"
          name="editor"
          [modules]="quillModules"
          (onEditorCreated)="onEditorCreated($event)"
          placeholder="Type or insert properties to build your expression">
        </quill-editor>
        <div class="mat-hint">Type or insert properties to build your expression</div>
      </div>

      <!-- Action Buttons -->
      <div class="button-row">
        <button mat-stroked-button type="button" (click)="clearEditor()">
          Clear
        </button>
        <button mat-raised-button color="primary" type="submit">
          Submit
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>

<!-- Display of the submission result -->
<mat-card *ngIf="editorContent" class="result-card">
  <mat-card-header>
    <mat-card-title>Current Content</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div class="content-preview">
      <h3>HTML Content:</h3>
      <pre class="submission-result">{{editorContent}}</pre>
      
      <h3>Plain Text:</h3>
      <pre class="submission-result">{{stripHtmlTags(editorContent)}}</pre>
    </div>
  </mat-card-content>
</mat-card>
